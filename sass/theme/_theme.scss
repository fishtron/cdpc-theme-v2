/* Bootstrap Overrides */

body {
  font-family: $font-family-sans-serif;
  background: #f5f5f5;
}

h1, h2 {
  font-family: $font-family-serif;
  font-weight: $font-weight-bold;
  margin-top: 1.5rem;
  margin-bottom: 1.25rem;
}

h1:not(.entry-title), h2:not(.entry-title) {
  margin-top: 2.5rem;
}

h3, h4, h5, h6 {
  font-family: $font-family-subhead;
  font-weight: $font-weight-bold;
}

h3, h4 {
  margin-top: 40px;
  margin-bottom: 20px;
}

strong {
  font-weight: bold;
}

a:hover {
  text-decoration: none;
}

blockquote, .blockquote {
  font-family: $font-family-serif;
  letter-spacing: $tight-letter-spacing;
  color: $secondary;
  font-weight: 700;
  p, &.wp-block-quote.is-large p, &.wp-block-quote.is-style-large p {
    font-style: normal;
  }
  cite {
    position: relative;
    font-size: $small-font-size;
    font-style: normal;
  }
}

figcaption {
  padding-top: $spacer * 0.25;
  color: $gray-600;
  font-size: 0.8em;
  text-align: center;
}

.navbar {
  &.bg-primary {
    .navbar-brand {
      color: $white;
    }
  }
  #wrapper-logo {
    min-height: 78px;
    .navbar-brand {
      position: absolute;
      top: -28px;
      img {
        max-height: 101px;
        width: auto;
      }
    }
  }
  ul.navbar-nav {
    li {
      a {
        text-transform: uppercase;
        font-size: $navbar-font-size;
        font-weight: $font-weight-bold;
      }
      @include media-breakpoint-down(sm) {
        .dropdown-menu .menu-item .dropdown-item {
          white-space: normal;
        }    
      }
      &.current-menu-item, &.current-page-ancestor {
        border-bottom: 1px solid $white;
      }
      &.nav-subitem {
        a {
          text-transform: initial;
          padding-left: 2.25rem;
        }
      }
      &.nav-btn-donate, &.nav-btn-cta {
        margin-top: -2px;
        margin-left: 7px;
        z-index: 3;
        a {
          color: rgba($white, 1);
          padding: 5px;
        }
      }
      &.nav-btn-cdpc a.nav-link:hover {
        color: $primary;
      }
      &.nav-btn-gtt a {

      }
      .dropdown-header {
        text-transform: uppercase;
      }
      .dropdown-menu {
        li {
          a {
            font-weight: normal;
          }
        }
      }
      @include media-breakpoint-up(lg) {
        &:hover>.dropdown-menu {
          display: block;
        }
      }
    }
  }
}

.jumbotron {
  @include media-breakpoint-between(sm,md) {
    h1 {
      font-size: 2.75rem;
      margin-top: 0;
    }
    h2 {
      font-size: 1.5rem;
    }
  }
  @include media-breakpoint-down(sm) {
    h1 {
      font-size: 2.25rem;
      margin-top: 0;
    }
    h2 {
      font-size: 1.25rem;
    }
  }
  h2 {
    font-weight: normal;
  }
}

.card-columns {
  @include media-breakpoint-up(lg) {
    column-count: 3;
  }
  @include media-breakpoint-only(md) {
    column-count: 2;
  }
  @include media-breakpoint-down(sm) {
    column-count: 1;
  }
}

.card-columns.card-horizontal {
  @include media-breakpoint-up(lg) {
    column-count: 2;
  }
  @include media-breakpoint-down(md) {
    column-count: 1;
  }
}

.side-quote {
  color: $primary;
  font-size: $font-size-lg;
  font-weight: 700;
  margin-top: 100px;
}

.lead {
  font-size: $font-size-base * 1.25;
  letter-spacing: $tighter-letter-spacing;
}

.btn {
  letter-spacing: $tight-letter-spacing;
}

/* Beaver Builder Overrides */

.wrapper {
  &#full-width-page-wrapper {
    #content {
      padding: 0;
      margin: 0;
      max-width: none;
      width: auto;
      .entry-header {
        /* make this a container with fixed width */
        margin-left: auto;
        margin-right: auto;
        @include make-container-max-widths();
        padding-left: 15px;
        padding-right: 15px;
      }
    }
  } 
  &.has-hero {
    padding-top: 0;
    .hero-header {
      position: relative;
      background-color: rgba($black, .85);
      overflow: visible;
      margin-bottom: $spacer * 3;
      &.overlay:before {
        position: absolute;
        content:" ";
        top:0;
        left:0;
        width:100%;
        height:100%;
        display: block;
        z-index:0;
        background-color: rgba(0,0,0,0.5);
      }
      * {
        position: relative;
      }
      h1 {
        color: $gray-100;
        text-align: center;
      }
      .lead {
        color: $gray-100;
        text-align: center;
      }
    }
  }
}

.fl-heading {
  /* Dual-colour headings */
  .fl-heading-text {
    strong {
      color: $secondary;
      width: 100%;
    }
  }
}

.fl-module-content {
  blockquote, .blockquote {
    p {
      font-size: $font-size-base * 2;
      line-height: $line-height-base * 0.8;
    }
  }
}

.fl-button-text {
  letter-spacing: $tight-letter-spacing;
}

.fl-module-post-slider {
  .bx-wrapper {
    margin-bottom: 0;
    .fl-post-slider-content {
      * {
        max-width: 1060px;
        margin-left: auto !important;
        margin-right: auto !important;
        // I'm so sorry
      }
      .fl-post-slider-feed-meta {
        font-size: $small-font-size;
      }
      .fl-post-slider-feed-content {
        letter-spacing: $tighter-letter-spacing;
        font-size: $font-size-base * 1.25;
      }
    }
    .bx-controls {
      bottom: 3rem;
      margin-top: 0;
      .bx-pager-item {
        .bx-pager-link {
          background: $gray-500;
          &.active {
            background: $gray-100;
          }
        }
      }
    }
  }
}

.fl-module-heading.sunken {
  z-index: 3;
  position: relative;
  .fl-module-content {
    position: absolute;
    width: calc(100% - 40px);
    .fl-heading:after {
      position: absolute;
      content: '';
      height: 2px;
    /* adjust this to move up and down. you may have to adjust the line height of the paragraph if you move it down a lot. */
      bottom: -16px;
      margin: 0 auto;
      left: 0;
      right: 0;
      width: 60px;
      background: $white;
    }
  }
}

.slider-text-bottom .fl-slide-foreground {
  position: absolute;
  bottom: 0; 
}

/* Let's Play With Widgets */

iframe {
  border: 0;
  width: 100%;
}

.nb-contact-form {
  h3 { // TODO: this should not be an H3 in markup
    color: #8D8F92;
    font-family: $font-family-sans-serif;
    font-size: $font-size-base;
  }
}

.signup-widget {
  background: $primary;
  padding: $spacer * 1.5;
  @media screen and (min-width: 768px) {
    background: url('../img/bdp-signup-bg.png');
    background-position: center;
    background-repeat: no-repeat;
    background-color: $primary;
  }
  iframe {
    height: 65px;
  }
  p {
    color: $white;
    @media screen and (min-width: 768px) {
      padding-left: calc(33% + 0.75rem);
    }
    &.small {
      margin-bottom: 0;
    }
  }
}

.signup-popup {
  background: $primary;
  p {
    font-size: $font-size-base * 1.25;
    color: $white;
  }
  iframe {
    height: 65px;
  }
}

// specific overrides when used as an fl-widget
.fl-widget {
  .nb-contact-form {
    padding-left: 0;
    padding-right: 0;
  }
}

/* Global Blocks */

.utility {
  padding-top: 0.75rem;
  margin-bottom: -0.5rem;
  min-height: 43px;
  .header-search {
    margin-top: 5px;
    .input-group {
      float: right;
      input.field {
        font-size: 12px;
        width: 0;
        z-index: 3;
        top: 0;
        right: 0;
        position: absolute;
        transition: 0.3s;
        background: none;
        border-color: transparent;
        cursor: pointer;
        &:focus {
          width: 300px;
          background: #fff;
          border-color: #fff;
          z-index: 1;
          border-radius: $input-border-radius;
          @include media-breakpoint-down(sm) {
            width: 200px;
          }
        }
      }
      .input-group-append {
        z-index: 2;
        input.submit, button.submit {
          text-transform: uppercase;
          color: $navbar-dark-color;
          position: absolute;
          display: inline-block;
          top: 0;
          right: 0;
          &:hover {
            color: $navbar-dark-hover-color;
          }
        }
      }
    }
  }
  .lang-switcher {
    div {
      padding-left: 0;
      padding-right: 0;
      ul li a {
        text-transform: uppercase;
        font-weight: bold;
        font-size: $navbar-font-size;
        line-height: 2rem;
      }
      &.wpml-ls-legacy-list-horizontal {
        border: 0;
        padding: 0;
        li.wpml-ls-item {
          border-right: solid 1px;
          border-color: $navbar-dark-color;
          a.wpml-ls-link {
            color: $navbar-dark-color;
            &:hover {
              color: $navbar-dark-hover-color;
              text-decoration: none;
            }
          }
          &.wpml-ls-first-item a {
            padding-left: 0;
          }
          &.wpml-ls-last-item {
            border: none;
            a {
              padding-right: 0;
            }
          }
        }
      }
    }
    
  }
  // colors for bg-primary
  &.bg-primary {
    .lang-switcher {
      div {
        &.wpml-ls-legacy-list-horizontal {
          .wpml-ls-item {
            a.wpml-ls-link {
              color: $navbar-dark-color;
            }
          }
        }
      }
    }
  }
}

.bio {
  //border-top: 1px solid $secondary;
  margin-top: $spacer * 3;
  padding-top: $spacer * 1.5;
  figure.author {
    position: relative;
    float: left;
    width: 100px;
    height: 100px;
    padding-right: $spacer;
  }
  span h3 {
    font-size: $font-size-base;
    margin-top: 0;
  }
}

.alignwide {
  @include media-breakpoint-up(lg) {
    margin-left: -15vw;
    margin-right: -15vw;
    width: calc(100% + 30vw);
    max-width: 100vw;
  }
}

.alignfull {
  margin: 2rem calc(50% - 50vw);
  max-width: 100vw;
}

.alignfull img {
  width: 100vw;
}

figure.wp-block-embed.is-type-rich {
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 56.25%; /*16:9*/
}
figure.wp-block-embed.is-type-rich iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100% !important;
  height: 100% !important;
}

.separator:before {
  display: block;
  margin: 1.5rem auto;
  width: 120px;
  content: '';
  border-bottom: 1px solid $gray-500;
  .light {
    border-color: $white;
  }
  .dark {
    border-color: $gray-800;
  }
}

// bouncy arrow - with thanks to https://codepen.io/bisaillonyannick/pen/pvZeGg
.arrow {
  text-align: center;
  margin: 5% 0;
}
.bounce {
  -moz-animation: bounce 2s infinite;
  -webkit-animation: bounce 2s infinite;
  animation: bounce 2s infinite;
}
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-30px);
  }
  60% {
    transform: translateY(-15px);
  }
} // end bouncy arrow

.social-links {
  padding-left: 0;
  list-style: none;
  transition: 0.3s;
  > li {
    display: inline-block;
    margin-left: 5px;
    margin-right: 5px;
    a {
      i {
        background: $gray-800;
        color: #fff;
        width: 36px;
        height: 36px;
        border-radius: 4px;
        font-size: 24px;
        text-align: center;
        padding-top: 12%;
        transition: all 0.1s ease-in-out;
        margin-bottom: 5px;
      }
      span {
        @include sr-only;
      }
    }
  }
  &.color {
    > li {
      a {
        i {
          &.fa-facebook {
            background:#3b5998;
            &:hover {
              background: lighten(#3b5998, 10%)
            }
          }
          &.fa-linkedin {
            background:#007bb6;
            &:hover {
              background: lighten(#007bb6, 10%)
            }
          }
          &.fa-twitter {
            background:#00aced;
            &:hover {
              background: lighten(#00aced, 10%)
            }
          }
          &.fa-google-plus {
            background:#dd4b39;
            &:hover {
              background: lighten(#dd4b39, 10%)
            }
          }
        }
      }
    }
  }
  &.light {
    > li {
      a {
        i {
          color: $gray-500;
          background: $gray-100;
          border: 1px solid $gray-100;
          &:hover {
            color: $primary;
          }
        }
      }
    }
  }
  &.dark {
    > li {
      a {
        i {
          color: $gray-500;
          background: $gray-800;
          &:hover {
            color: $primary;
          }
        }
      }
    }
  }
} // ul.social-icons


/* Footer */
#wrapper-footer-full {
  padding-top: $spacer * 3;
  #footer-text-sfu-en, #footer-text-sfu-fr {
    // hardcoding the width because widget count returns
    // both en and fr versions of the same widget as active
    // and messes up the dynamic grid
    @include make-col(12);
    @include media-breakpoint-between(sm,lg) {
      @include make-col(6);
    }
    @include media-breakpoint-up(lg) {
      @include make-col(6);
    }
  }
  .nb-contact-form {
    @include make-col(12);
    @include media-breakpoint-between(sm,lg) {
      @include make-col(6);
    }
    @include media-breakpoint-up(lg) {
      @include make-col(4);
      @include make-col-offset(2);
    }
    margin-top: $spacer * 1.25;
    h3 {
      color: $secondary;
    }
    input.submit-button {
      color: $primary;
    }
  }
}
#wrapper-footer {
  padding-top: 0;
  .wpml-ls-statics-footer.wpml-ls-legacy-list-horizontal {
    display: inline-block;
    padding-left: 0;
    margin-bottom: 0;
  }
  #footer-legal-menu {
    display: inline-block;
  }
  .social-links {
    text-align: right;
  }
}
#wrapper-footer-full, #wrapper-footer {
  background-color: $black;
  .container {
    color: $secondary;
    font-size: $font-size-sm;
  }
}


/* Homepage customisations */

// pulse animation: with thanks to https://codepen.io/olam/pen/zcqea
.pulse {
  display: block;
  cursor: pointer;
  box-shadow: 0 0 0 rgba($white, 0.4);
  animation: pulse 2s infinite;
}

.pulse:hover {
  animation: none;
}

@-webkit-keyframes pulse {
  0% {
    -webkit-box-shadow: 0 0 0 0 rgba($white, 0.4);
  }
  70% {
      -webkit-box-shadow: 0 0 0 10px rgba($white, 0);
  }
  100% {
      -webkit-box-shadow: 0 0 0 0 rgba($white, 0);
  }
}
@keyframes pulse {
  0% {
    -moz-box-shadow: 0 0 0 0 rgba($white, 0.4);
    box-shadow: 0 0 0 0 rgba($white, 0.4);
  }
  70% {
      -moz-box-shadow: 0 0 0 10px rgba($white, 0);
      box-shadow: 0 0 0 10px rgba($white, 0);
  }
  100% {
      -moz-box-shadow: 0 0 0 0 rgba($white, 0);
      box-shadow: 0 0 0 0 rgba($white, 0);
  }
} // end pulse animation


/* Blog/Archive page customisations */

.blog, .archive, .page-template-publications {
  .card-deck {
    margin-top: $spacer * 1.5;
    margin-bottom: $spacer * 1.5;
    @include media-breakpoint-up(md) {
      .card { max-width: 30.33%; }
    }
  }
  .card .wrapper-thumb {
    position: relative;
    overflow: hidden;
    img {
      display: block;
      width: 100%;
      max-width: 100%;
      height: 10vw;
      min-height: 150px;
      object-fit: cover;
      transition: all 0.3s;
      transform: scale(1);
      &:hover {
        transform: scale(1.1);
      }
    }
  }
  .entry-header {
    h2.entry-title {
      font-size: 1.25rem;
    }
    .entry-meta {
      font-size: .75rem;
    }
  }
  .entry-content {
    font-size: $font-size-sm;
  }
  .entry-footer.card-footer {
    background: transparent;
    border-top: 0;
  }
}

.single-post, .single-publications {
  .entry-header {
    margin-top: $spacer * 1.5;
    margin-bottom: $spacer * 1.5;
    .entry-meta {
      font-size: $small-font-size;
    }
  }
  nav.post-navigation {
    padding-top: $spacer * 3;
    clear: both;
    .nav-links {
      border-top: 1px solid $secondary;
      border-bottom: 1px solid $secondary;
      .nav-previous {
        padding: $spacer;
        border-bottom: 1px solid $secondary;
        @include media-breakpoint-up(md) {
          border-bottom: 0;
          border-right: 1px solid $secondary;
        }
      }
      .nav-next {
        padding: $spacer;
      }
    }
  }
}

/* Single post customisations */
#single-wrapper {
  .content-area {
    max-width: 720px;
    margin-left: auto;
    margin-right: auto;
  }
}

/* Single publication customisations */
.publication-wrapper {
  font-size: 80%;
  h3 {
    font-style: 1.5rem;
  }
}

/* People pages customisations */

#people-wrapper {
  .card-body {
    padding: 1rem 1rem 0 1rem;
    .entry-header .entry-title {
      font-size: 1.25rem;
      margin-top: 0.5rem;
    }
    .entry-content {
      font-size: $font-size-sm;
    }
  }
}

.single article.people {
  .entry-header {
    margin-top: $spacer * 1.5;
    margin-bottom: $spacer * 1.5;
    .card {
      .card-body {
        padding: 1rem;
      }
    }
  }
}

.page-template-default {
  .container#content {
    max-width: 720px;
    margin-left: auto;
    margin-right: auto;
  }
}

.fl-post-carousel .fl-photo-content {
  position: relative;
  overflow: hidden;
  img {
    display: block;
    width: 100%;
    max-width: 100%;
    height: 10vw;
    min-height: 150px;
    object-fit: cover;
    transition: all 0.3s;
    transform: scale(1);
    &:hover {
      transform: scale(1.1);
    }
  }
}

// twitter widget override - hacks to centre tweet in 
// content area and ensure it doesn't get too wide on mobile
.twitter-tweet {
  margin-left: auto;
  margin-right: auto;
  max-width: 100vw !important;
}
